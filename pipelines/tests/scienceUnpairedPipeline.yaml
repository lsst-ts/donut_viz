# This yaml file is used to define the tasks and configuration of
# a Gen 3 pipeline used for testing in ts_wep.
description: wep basic processing test pipeline
# Here we specify the corresponding instrument for the data we
# will be using.
instrument: lsst.obs.lsst.LsstCam
# Then we can specify each task in our pipeline by a name
# and then specify the class name corresponding to that task
tasks:
  isr:
    class: lsst.ip.isr.IsrTaskLSST
    config:
      connections.outputExposure: post_isr_image
      python: |
        from lsst.cp.pipe import configureIsrTaskLSSTForCalibrations

        configureIsrTaskLSSTForCalibrations(config)
        config.doBootstrap = True
        config.doCrosstalk = False
  generateDonutCatalogWcsTask:
    class: lsst.ts.wep.task.generateDonutCatalogWcsTask.GenerateDonutCatalogWcsTask
    config:
      connections.exposure: post_isr_image
      donutSelector.unblendedSeparation: 1
  cutOutDonutsScienceSensorTask:
    class: lsst.ts.wep.task.CutOutDonutsScienceSensorTask
    config:
      connections.exposures: post_isr_image
      runPaired: False
  calcZernikesUnpairedTask:
    class: lsst.ts.wep.task.calcZernikesUnpairedTask.CalcZernikesUnpairedTask
    config:
      connections.donutStamps: donutStampsScienceSensor
  aggregateZernikeTablesTask:
    class: lsst.donut.viz.AggregateZernikeTablesTask
  aggregateDonutTablesUnpairedTask:
    class: lsst.donut.viz.AggregateDonutTablesUnpairedTask
  aggregateDonutStampsUnpairedTask:
    class: lsst.donut.viz.AggregateDonutStampsUnpairedTask
    config:
      connections.donutStampsIn: donutStampsScienceSensor
  aggregateAOSVisitTableUnpairedTask:
    class: lsst.donut.viz.AggregateAOSVisitTableUnpairedTask
  plotAOSTask:
    class: lsst.donut.viz.PlotAOSTask
    config:
      doRubinTVUpload: False
